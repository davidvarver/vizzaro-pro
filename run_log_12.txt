node.exe : PASS __te
sts__/stores/cartSto
re.test.tsx
En C:\Program Files\
nodejs\npx.ps1: 29 
Car?cter: 3
+   & $NODE_EXE 
$NPX_CLI_JS $args
+   ~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~
    + CategoryInfo  
            : NotS  
  pecified: (PASS   
  __tests__/stor    
es/cartStore.te    
st.tsx:String)     
[], RemoteExcep    
tion
    + FullyQualifie 
   dErrorId : Nati  
  veCommandError
 
  ??? Cart store 
adds and removes 
items correctly 
(891 ms)

  console.log
    [WallpapersContext] Loading catalog... (forceRefresh: false )

      at log (contexts/WallpapersContext.tsx:16:15)

  console.log
    [WallpapersContext] Attempting to load from API: https://mock-api.com/api/catalog/get

      at log (contexts/WallpapersContext.tsx:22:19)

PASS __tests__/compo
nents/WallpaperCard.
test.tsx
  WallpaperCard
    ??? renders 
correctly (767 ms)
    ??? calls 
onPress when 
pressed (9 ms)

  console.log
    [WallpapersContext] Loaded from API: 2 items

      at log (contexts/WallpapersContext.tsx:41:21)

  console.log
    [WallpapersContext] API timestamp: 123

      at log (contexts/WallpapersContext.tsx:42:21)

  console.log
    [WallpapersContext] Valid items after filtering: 2

      at log (contexts/WallpapersContext.tsx:48:23)

  console.log
    [WallpapersContext] Manual refetch requested

      at log (contexts/WallpapersContext.tsx:287:13)

  console.log
    [WallpapersContext] Loading catalog... (forceRefresh: true )

      at log (contexts/WallpapersContext.tsx:16:15)

  console.log
    [WallpapersContext] Attempting to load from API: https://mock-api.com/api/catalog/get

      at log (contexts/WallpapersContext.tsx:22:19)

  console.log
    [WallpapersContext] Loaded from API: 2 items

      at log (contexts/WallpapersContext.tsx:41:21)

  console.log
    [WallpapersContext] API timestamp: 123

      at log (contexts/WallpapersContext.tsx:42:21)

  console.log
    [WallpapersContext] Valid items after filtering: 2

      at log (contexts/WallpapersContext.tsx:48:23)

  console.error
    [Admin Orders] Error: TypeError: Cannot read properties of undefined (reading 'ok')
        at ok (C:\Users\david\Downloads\vizaro pro\-vizzaro-wallpaper\api\orders\list.js:58:30)
        at Generator.next (<anonymous>)
        at asyncGeneratorStep (C:\Users\david\Downloads\vizaro pro\-vizzaro-wallpaper\node_modules\@babel\runtime\helpers\asyncToGenerator.js:3:17)
        at _next (C:\Users\david\Downloads\vizaro pro\-vizzaro-wallpaper\node_modules\@babel\runtime\helpers\asyncToGenerator.js:17:9)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)

    [0m [90m 78 |[39m
     [90m 79 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 80 |[39m         console[33m.[39merror([32m'[Admin Orders] Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 81 |[39m         [36mreturn[39m res[33m.[39mstatus([35m500[39m)[33m.[39mjson({
     [90m 82 |[39m             success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 83 |[39m             error[33m:[39m [32m'Error al obtener pedidos'[39m[33m,[39m[0m

      at error (api/orders/list.js:80:17)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  console.error
    An update to null inside a test was not wrapped in act(...).
    
    When testing, code that causes React state updates should be wrapped into act(...):
    
    act(() => {
      /* fire events that update state */
    });
    /* assert on the output */
    
    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

    [0m [90m 49 |[39m               
     [90m 50 |[39m               [36mif[39m (validCatalog[33m.[39mlength [33m>[39m [35m0[39m) {
    [31m[1m>[22m[39m[90m 51 |[39m                 setWallpapers(validCatalog)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 52 |[39m                 [36mawait[39m [33mAsyncStorage[39m[33m.[39msetItem([33mSTORAGE_KEY[39m[33m,[39m [33mJSON[39m[33m.[39mstringify(validCatalog))[33m;[39m
     [90m 53 |[39m                 [36mawait[39m [33mAsyncStorage[39m[33m.[39msetItem([33mSTORAGE_KEY[39m [33m+[39m [32m'_timestamp'[39m[33m,[39m data[33m.[39mtimestamp[33m?[39m[33m.[39mtoString() [33m||[39m [33mDate[39m[33m.[39mnow()[33m.[39mtoString())[33m;[39m
     [90m 54 |[39m                 setIsLoading([36mfalse[39m)[33m;[39m[0m

      at node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14402:19
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:2315:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14401:9)
      at scheduleUpdateOnFiber (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12086:9)
      at dispatchSetStateInternal (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6208:13)
      at dispatchSetState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6165:7)
      at setWallpapers (contexts/WallpapersContext.tsx:51:17)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  console.log
    [AuthContext] Logging in... test@example.com

      at log (contexts/AuthContext.tsx:280:15)

  console.log
    [AuthContext] Base URL: https://mock-api.com

      at log (contexts/AuthContext.tsx:284:17)

  console.error
    An update to null inside a test was not wrapped in act(...).
    
    When testing, code that causes React state updates should be wrapped into act(...):
    
    act(() => {
      /* fire events that update state */
    });
    /* assert on the output */
    
    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

    [0m [90m 52 |[39m                 [36mawait[39m [33mAsyncStorage[39m[33m.[39msetItem([33mSTORAGE_KEY[39m[33m,[39m [33mJSON[39m[33m.[39mstringify(validCatalog))[33m;[39m
     [90m 53 |[39m                 [36mawait[39m [33mAsyncStorage[39m[33m.[39msetItem([33mSTORAGE_KEY[39m [33m+[39m [32m'_timestamp'[39m[33m,[39m data[33m.[39mtimestamp[33m?[39m[33m.[39mtoString() [33m||[39m [33mDate[39m[33m.[39mnow()[33m.[39mtoString())[33m;[39m
    [31m[1m>[22m[39m[90m 54 |[39m                 setIsLoading([36mfalse[39m)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 55 |[39m                 [36mreturn[39m[33m;[39m
     [90m 56 |[39m               } [36melse[39m {
     [90m 57 |[39m                 console[33m.[39mwarn([32m'[WallpapersContext] No valid items in catalog, using defaults'[39m)[33m;[39m[0m

      at node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14402:19
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:2315:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14401:9)
      at scheduleUpdateOnFiber (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12086:9)
      at dispatchSetStateInternal (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6208:13)
      at dispatchSetState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6165:7)
      at setIsLoading (contexts/WallpapersContext.tsx:54:17)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  console.log
    [AuthContext] Attempting login via API: https://mock-api.com/api/users/login

      at log (contexts/AuthContext.tsx:286:17)

  console.log
    [AuthContext] Response status: 200

      at log (contexts/AuthContext.tsx:295:17)

  console.log
    [AuthContext] Response headers: application/json

      at log (contexts/AuthContext.tsx:296:17)

  console.log
    [AuthContext] User logged in via API: true

      at log (contexts/AuthContext.tsx:310:19)

  console.error
    An update to null inside a test was not wrapped in act(...).
    
    When testing, code that causes React state updates should be wrapped into act(...):
    
    act(() => {
      /* fire events that update state */
    });
    /* assert on the output */
    
    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

    [0m [90m 90 |[39m       setWallpapers(defaultWallpapers)[33m;[39m
     [90m 91 |[39m     } [36mfinally[39m {
    [31m[1m>[22m[39m[90m 92 |[39m       setIsLoading([36mfalse[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 93 |[39m     }
     [90m 94 |[39m   }[33m,[39m [])[33m;[39m
     [90m 95 |[39m[0m

      at node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14402:19
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:2315:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14401:9)
      at scheduleUpdateOnFiber (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12086:9)
      at dispatchSetStateInternal (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6208:13)
      at dispatchSetState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:6165:7)
      at setIsLoading (contexts/WallpapersContext.tsx:92:7)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  console.log
    [AuthContext] Logging out...

      at log (contexts/AuthContext.tsx:347:15)

  console.log
    [AuthContext] Removing keys: [ '@auth_token', '@auth_user' ]

      at log (contexts/AuthContext.tsx:348:15)

  console.log
    [AuthContext] Keys removed, updating state...

      at log (contexts/AuthContext.tsx:352:15)

  console.log
    [AuthContext] ??? Logout successful

      at log (contexts/AuthContext.tsx:360:15)

PASS __tests__/store
s/wallpaperStore.tes
t.tsx
  ??? Wallpaper 
store fetches and 
displays wallpapers 
(955 ms)

FAIL __tests__/api/o
rdersList.test.ts
  API: 
/api/orders/list
    ??? returns 405 
if method is not 
GET (12 ms)
    ??? returns 
error if not admin 
(1 ms)
    ?? fetches 
orders successfully 
(59 ms)
    ??? handles 
empty order list (1 
ms)

  ??? API: 
/api/orders/list 
??? fetches orders 
successfully

    expect(jest.fn()
).toHaveBeenCalledTi
mes(expected)

    Expected number 
of calls: 2
    Received number 
of calls: 3

    [0m [90m 78 
|[39m         
[36mawait[39m hand
ler(req[33m,[39m 
res)[33m;[39m
     [90m 79 |[39m
    [31m[1m>[22m
[39m[90m 80 |[39m 
        expect(globa
l[33m.[39mfetch)[
33m.[39mtoHaveBeenC
alledTimes([35m2[3
9m)[33m;[39m
     [90m    
|[39m              
                
[31m[1m^[22m[39m
     [90m 81 
|[39m         expec
t(res[33m.[39mstat
us)[33m.[39mtoHave
BeenCalledWith([35m
200[39m)[33m;[39m
     [90m 82 
|[39m         expec
t(res[33m.[39mjson
)[33m.[39mtoHaveBe
enCalledWith(expect
[33m.[39mobjectCont
aining({
     [90m 83 
|[39m             
success[33m:[39m 
[36mtrue[39m[33m,
[39m[0m

      at Object.toHa
veBeenCalledTimes (_
_tests__/api/ordersL
ist.test.ts:80:30)
      at 
asyncGeneratorStep (
node_modules/@babel/
runtime/helpers/asyn
cToGenerator.js:3:17
)
      at _next (node
_modules/@babel/runt
ime/helpers/asyncToG
enerator.js:17:9)

PASS __tests__/store
s/authStore.test.tsx
  ??? Auth store 
handles login and 
logout (968 ms)

Test Suites: 1 
failed, 4 passed, 5 
total
Tests:       1 
failed, 8 passed, 9 
total
Snapshots:   0 total
Time:        3.287 
s, estimated 4 s
Ran all test suites.
